<%- include('../includes/head') -%>
<body>
<%- include('../includes/sidebar') -%>

<%- include('../includes/navbar') -%>
<div id="wrapper">
	<div class="main-content">
		<div class="row small-spacing">
			<div class="col-lg-4 col-md-6 col-xs-12">
				<div class="box-content bg-info text-white">
					<div class="statistics-box with-icon">
						<i class="ico icon-users"></i>
						<p class="text text-white">Usuários Cadastrados</p>
						<h2 class="counter"><%= count.users%></h2>
					</div>
				</div>
				<!-- /.box-content -->
			</div>
			<!-- /.col-lg-3 col-md-6 col-xs-12 -->
			<div class="col-lg-4 col-md-6 col-xs-12">
				<div class="box-content bg-inverse text-white">
					<div class="statistics-box with-icon">
						<i class="ico icon-thermometer"></i>
						<p class="text text-white">Sensores Cadastrados</p>
						<h2 class="counter"><%= count.sensors%></h2>
					</div>
				</div>
				<!-- /.box-content -->
			</div>
			<!-- /.col-lg-3 col-md-6 col-xs-12 -->
			<div class="col-lg-4 col-md-6 col-xs-12">
				<div class="box-content bg-warning text-white">
					<div class="statistics-box with-icon">
						<i class="ico icon-warning-empty"></i>
						<p class="text text-white">alertas emitidos</p>
						<h2 class="counter"><%= count.alerts%></h2>
					</div>
				</div>
				<!-- /.box-content -->
			</div>
			<!-- /.col-lg-3 col-md-6 col-xs-12 -->
		</div>
		<!-- .row -->
		<div class="row small-spacing">
			<div class="col-lg-12 col-xs-12">
				<div class="box-content bg-white text-white">
					<div class="statistics-box with-icon">
						<i class="ico icon-calc text-inverse"></i>
						<h1 class="text-inverse">Média de Temperaturas Por sensor</h1>
					</div>
				</div>
			</div>
			<!-- /.col-lg-3 col-xs-12 -->
			<% for(i = 0; i < avg.length; i++){ %>				
					<div class="col-lg-3 col-xs-12">
						<div class="box-content">
							<a href="../sensors/detail/<%= avg[i].key %>">
								<h4 class="box-title">Local: <%= avg[i].local%></h4>
							</a>
							<!-- /.box-title -->
							<div class="text-center">
								<div class="knob-wrap">
									<input class="knob" data-width="150" data-height="150" data-bgColor="#ebeff2" data-fgColor="#42c451" data-readOnly=true data-thickness=".4" value="<%= avg[i].avg%>"  />
								</div>
								<!-- .knob-wrap -->
							</div>
						</div>
						<!-- /.box-content -->
					</div>
			<% } %>
	
		<footer class="footer">
			<ul class="list-inline">
				<li>2019 © DataBytes</li>
				
				
			</ul>
		</footer>
	</div>
	<!-- /.main-content -->
</div><!--/#wrapper -->
	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
		<script src="assets/script/html5shiv.min.js"></script>
		<script src="assets/script/respond.min.js"></script>
	<![endif]-->
	<!-- 
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="assets/scripts/jquery.min.js"></script>
	<script src="assets/scripts/modernizr.min.js"></script>
	<script src="assets/plugin/bootstrap/js/bootstrap.min.js"></script>
	<script src="assets/plugin/mCustomScrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
	<script src="assets/plugin/nprogress/nprogress.js"></script>
	<script src="assets/plugin/sweet-alert/sweetalert.min.js"></script>
	<script src="assets/plugin/waves/waves.min.js"></script>
	<!-- Jquery Knob -->
	<script src="../../assets/plugin/knob/jquery.knob.min.js"></script>
	<script src="../../assets/scripts/jquery.knob.init.js"></script>
	<!-- chart.js Chart -->
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

	<script src="assets/scripts/main.min.js"></script>
	<script>
		var temper = document.getElementById('temp').getContext('2d');
		var t1 = new Chart(temper, {
			// O tipo de gráfico que será criado
			type: 'line',
			// As configurações do gráfico
			data: {
				labels: ['a','a','a','a','a','a','a','a','a','a','a','a'],
				datasets: [
					<% for(i = 0; i < avg.length; i++){ %>
						{
							label: "<%= avg[i].local%>",
							borderColor: "rgb(235, 40, 40)",
							data: [<%= avg[i].avg%>],
							fill: true,
							pointStyle: 'circle',
							backgroundColor: 'rgb(235, 40, 40, .3)',
							pointRadius: 5,
							pointHoverRadius: 7,
							lineTension: 0,
						}
						<% if(i != (avg.length -1)){ %>
							,
						<% } %>
					<% } %>
				]
			},
			// Aqui será Configurado o título do gráfico e deixá-lo responsivo
			options: {
				responsive: true,
				hoverMode: 'index',
				stacked: false,
				scales: {
					yAxes: [{
						ticks: {
							beginAtZero: false,
							// Inclui a °C para o gráfico de Temperatura
							callback: function(value) {
								return value + '°C';
							}
						}
					}]
				}
			}
			
		});
	</script>
</body>
</html>